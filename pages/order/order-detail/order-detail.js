(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order-detail/order-detail"],{"581e":function(e,t,r){"use strict";r.r(t);var n=r("fc00"),o=r("6b22");for(var i in o)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i);r("df36");var a=r("5d22"),d=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"10b757cb",null);t["default"]=d.exports},"6b22":function(e,t,r){"use strict";r.r(t);var n=r("b71a"),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},b71a:function(e,t,r){"use strict";(function(e){function n(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,d=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return d=e.done,e},e:function(e){s=!0,a=e},f:function(){try{d||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){return r.e("components/page-component/app-order-goods-info/app-order-goods-info").then(r.bind(null,"1602"))},d=function(){return r.e("components/page-component/app-order-express/app-order-express").then(r.bind(null,"2338"))},s=function(){return r.e("components/page-component/app-order-banner/app-order-banner").then(r.bind(null,"ccb8"))},c={components:{"app-order-goods-info":a,"app-order-express":d,"app-order-banner":s},data:function(){return{order_id:null,orderDetail:{detailExpressRelation:[],detailExpress:[]},is_show:!1,advance_order:{goods_num:0},detail:[],sign:"",ecard:[],isShowFormGoods:!1}},computed:{formList:function(){var e=this,t=e.orderDetail.detail,r={},o=[];if(t&&t.length){var i,a=n(t);try{for(a.s();!(i=a.n()).done;){var d=i.value;"0"!=d.form_id&&(-1===o.indexOf(d.form_id)?(o.push(d.form_id),r[d.form_id]=[d]):r[d.form_id].push(d))}}catch(s){a.e(s)}finally{a.f()}}return e.isShowFormGoods=o.length>1,Object.values(r)},getPageUrl:function(){var e=this.orderDetail;if(1==e.is_send&&0==e.detailExpress.length){var t="";return e.detail.forEach((function(e,r){0===r&&(t=e.goods_info.pic_url)})),"/pages/order/express-detail/express-detail?express=".concat(e.express,"&customer_name=").concat(e.customer_name,"&express_no=").concat(e.express_no,"&cover_pic=").concat(t)}if(1==e.is_send&&1==e.detailExpress.length){var r=e.detailExpress[0].express,n=e.detailExpress[0].express_no,o=e.detailExpress[0].customer_name,i=e.detailExpress[0].expressRelation[0].orderDetail.goods_info.goods_attr.cover_pic;return"/pages/order/express-detail/express-detail?express="+r+"&customer_name="+o+"&express_no="+n+"&cover_pic="+i}if(e.detailExpress.length>=1)return"/pages/order/express-list/express-list?order_id="+e.id}},methods:{look:function(t){e.previewImage({current:t,urls:[t]})},toggle:function(e){this.orderDetail.composition_list[e].show=!this.orderDetail.composition_list[e].show,this.$forceUpdate()},getOrderDetail:function(){var t=this;t.$showLoading(),t.$request({url:t.$api.order.detail,data:{id:t.order_id}}).then((function(r){if(t.$hideLoading(),t.is_show=!0,0==r.code){if(t.orderDetail=r.data.detail,t.ecard=[t.orderDetail.type_data.ecard[0]],"composition"==t.sign)for(var n in t.orderDetail.composition_list)t.orderDetail.composition_list[n].show=!1}else e.showModal({title:"",content:r.msg,showCancel:!1})})).catch((function(){t.$hideLoading()}))},copyText:function(t){this.$utils.uniCopy({data:t,success:function(){e.showToast({title:"复制成功",icon:"none"})}})},copyTextEcard:function(t){for(var r="",n=0;n<t.length;n++)r+="".concat(t[n].key,":").concat(t[n].value,"\n");this.$utils.uniCopy({data:r,success:function(){e.showToast({title:"复制成功",icon:"none"})}})},navigation:function(t){e.openLocation({latitude:parseFloat(t.latitude),longitude:parseFloat(t.longitude),name:t.name,address:t.address})},cancel:function(t){e.navigateTo({url:"/pages/order/refund/order-refund?id="+t.id})},cancelAction:function(t){var r=this;e.showLoading({title:"取消中"}),r.$request({url:r.$api.order.cancel,data:{id:t.id}}).then((function(t){e.hideLoading(),0===t.code?"advance"===r.sign?r.$request({url:r.$api.advance.order_detail,method:"get",data:{id:r.order_id}}).then((function(t){r.is_show=!0,0===t.code?r.orderDetail=t.data.detail:e.showModal({title:"",content:t.msg,showCancel:!1})})):r.getOrderDetail():e.showModal({title:"",content:t.msg,showCancel:!1})})).catch((function(){e.hideLoading()}))},mobile:function(){e.makePhoneCall({phoneNumber:this.orderDetail.city.mobile})},go_eCard:function(){e.navigateTo({url:"/pages/rules/index?url=".concat(encodeURIComponent(this.$api.ecard.index),"&key=content&data=").concat(JSON.stringify({order_id:this.orderDetail.id}))})}},onLoad:function(e){this.$commonLoad.onload(e),this.order_id=e.id,this.sign=e.sign},onShow:function(){var t=this,r=setInterval((function(){"advance"===t.sign?t.$request({url:t.$api.advance.order_detail,method:"get",data:{id:t.order_id}}).then((function(r){t.is_show=!0,0===r.code?t.orderDetail=r.data.detail:e.showModal({title:"",content:r.msg,showCancel:!1})})):t.getOrderDetail(),clearInterval(r)}),300)}};t.default=c}).call(this,r("d2c1")["default"])},df36:function(e,t,r){"use strict";r("e387")},e387:function(e,t,r){},fc00:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.__map(e.orderDetail.order_form,(function(t,r){var n=Array.isArray(t.value);return{$orig:e.__get_orig(t),g0:n}}))),n=e.__map(e.formList,(function(t,r){var n=e.__map(t[0]["form_data"],(function(t,r){var n=Array.isArray(t.value);return{$orig:e.__get_orig(t),g1:n}}));return{$orig:e.__get_orig(t),l1:n}}));e._isMounted||(e.e0=function(t){e.ecard=e.orderDetail.type_data.ecard}),e.$mp.data=Object.assign({},{$root:{l0:r,l2:n}})},o=[]}},[["4eb9","common/runtime","common/vendor"]]]);