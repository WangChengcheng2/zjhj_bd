(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/advance/search/search"],{1471:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"5f47":function(t,e,r){"use strict";r.r(e);var n=r("1471"),a=r("919a");for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("8553");var o=r("5d22"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"6ef51126",null);e["default"]=s.exports},8553:function(t,e,r){"use strict";r("fdf5")},"919a":function(t,e,r){"use strict";r.r(e);var n=r("bfe1"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},bfe1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(r("b096")),a=r("7736");function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,c,"next",t)}function c(t){o(i,n,a,s,c,"throw",t)}s(void 0)}))}}function c(t){return f(t)||h(t)||l(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"===typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m=function(){return r.e("plugins/advance/components/index-product-list").then(r.bind(null,"51af"))},b="ADVANCE_SEARCH",y={name:"search",data:function(){return{search_text:"",search_list:[],strong:[],search:!1,page:1,over:!1,interval:0}},onLoad:function(){this.$commonLoad.onload(),this.$storage.getStorageSync(b)?this.strong=this.$storage.getStorageSync(b):this.$storage.setStorageSync(b,[])},computed:v({},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"})),onHide:function(){clearInterval(this.interval)},onUnload:function(){clearInterval(this.interval)},onReachBottom:function(){var t=this;this.over||(this.page+=1,this.$request({url:this.$api.advance.goods,method:"get",data:{keyword:this.search_text,page:this.page}}).then((function(e){0===e.code&&(e.data.list.length>0?t.search_list=[].concat(c(t.search_list),c(e.data.list)):t.over=!0)})))},methods:{empyt_search:function(){this.search_text="",this.search_list=[],this.search=!1,clearInterval(this.interval)},request:function(){var t=s(n.default.mark((function t(){var e,r,a;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.search=!0,this.page=1,e=this.$storage.getStorageSync(b),!this.search_text.match(/^[ ]*$/)){t.next=5;break}return t.abrupt("return");case 5:return r=[].concat(c(e),[this.search_text]),t.next=8,this.$request({url:this.$api.advance.goods,method:"get",data:{keyword:this.search_text,page:this.page}});case 8:a=t.sent,0===a.code&&(this.search_list=a.data.list,this.set_interval(),this.$storage.setStorageSync(b,r));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),empty_strong:function(){this.$storage.removeStorageSync(b),this.strong=[]},search_strong:function(t){this.search_text=t,this.request()},set_interval:function(){var t=this;clearInterval(this.interval),this.interval=setInterval((function(){var e=(new Date).getTime();0===t.search_list.length&&clearInterval(t.interval);for(var r=0;r<t.search_list.length;r++){var n=new Date(t.search_list[r].advanceGoods.end_prepayment_at.replace(/-/g,"/")).getTime(),a=n-e;if(a>0){var i=parseInt(a/1e3/60/60/24%30),o=parseInt(a/1e3/60/60%24),s=parseInt(a/1e3/60%60),c=parseInt(a/1e3%60);i>0?t.$set(t.search_list[r],"html",i+"å¤©"+o+":"+(s<10?"0"+s:s)+":"+(c<10?"0"+c:c)):t.$set(t.search_list[r],"html",o+":"+(s<10?"0"+s:s)+":"+(c<10?"0"+c:c))}else t.$delete(t.search_list,r),t.search_list.length<10&&t.page_count>1&&t.$request({url:t.$api.advance.goods,method:"get"}).then((function(e){0===e.code&&(t.search_list=e.data.list,t.set_interval())}))}}),1e3)}},components:{"index-product-list":m}};e.default=y},fdf5:function(t,e,r){}},[["fbf7","common/runtime","common/vendor"]]]);